whatsTheScore
=============

<h4>What does it do?</h4>
The app uses the <a href='http://apps.washingtonpost.com/sports/'>Washington Post Sports API</a> to fetch and display stats from the week 15 NFL games. Visit <a href='http://iainmingo.com/'>iainmingo.com</a> to see for yourself.

<h4>Why only week 15 stats?</h4>
Unfortunately the WaPo Sports API isn't very well documented (read: undocumented) and I haven't been able to decode the URIs, so the gamecodes are hardcoded.

<h4>How does it work?</h4>
The front-end is written using AngularJS and the back-end is written in Django. Django serves up static content while AngularJS does most of the heavy lifting. To circumvent HTTP Access Control, requests are made for data to be returned in JSONP format, which is then evaluated and fed into the scope by AngularJS. 

A factory serves as the link between the controller and the directives, fetching the data from the API and employing rootScope broadcasts to notify directives when the fetched data is ready. Animations are handled using CSS3 without using jQuery. The factory also employs a cache that stores previously fetched game stats to speed up response time.

``` javascript
services.factory('queryService', function($rootScope, $http) {

	var API_URI = 'http://apps.washingtonpost.com/sports/api/nfl/v2/games/?format=jsonp&game_code=';

	var queryService = {
		returned: {},
		cached: {}
	};

	queryService.getGame = function(code) {

		// first check the cache
		if (queryService.cached[code] != null) {
			$rootScope.$broadcast('hide');
			queryService.returned = queryService.cached[code];
			$rootScope.$broadcast('fetched');
			$rootScope.$broadcast('show');
		}
		// if not in the cache then we fetch the data
		else {
			var builtURI = API_URI + code;
			$rootScope.$broadcast('hide');

			// using jsonp to circumvent HTTP Access Control rejections
			$http.jsonp(builtURI);
		
			// functon needs to be defined on the window scope
			window.callback = function(data) {
				queryService.returned = data.objects[0];
				console.log(data.objects[0]);
				queryService.cached[code] = data.objects[0];
				$rootScope.$broadcast('fetched');
			}

			$rootScope.$broadcast('show');
		}
	
	}

	return queryService;
})
```

I also use a custom filter to display some of the stats that I'm calculating based on the data.

``` javascript
app.filter('perc', function() {
  return function (input) {
    if (input) {
      var per = input * 100;
      return per.toFixed(0);
    }
  }
})
```

As you can see, this filter rounds the calculated value to 2 decimal points and multiplies it by 100.

<h4>How did I build it?</h4>
I started with a scaffolding generated by Yeoman. Once the AngularJS app was running properly and interfacing with the API, I shifted the files to a local server running Django and finalized the UI. After that I pushed the whole project to github and from there transferred it onto a production server running Django.

<h4>Frameworks/libraries used</h4>
* Django 1.5.1
* Bootstrap CSS
* AngularJS 1.2
* Font Awesome

<h4>Tools</h4>
* SASS
* Sublime Text
* Git CLI
* Yeoman
* Bower


